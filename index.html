<meta property="og:title"content="Konst på pixla.nu"><meta property="og:description"content="Pixla. Dela."><meta property="og:image"content="https://pixla.nu/og_image.png"><meta property="og:url"content="https://pixla.nu"><meta name="twitter:card"content="summary_large_image"><meta property="og:site_name"content="Pixla.nu"><meta name="twitter:image:alt"content="Pixelkonst från pixla.nu"><meta name="viewport"content="width=device-width,initial-scale=1"><style type="text/css">body{background-color:#101820;margin:0;user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none}.all{width:832px;margin:64px auto 0}canvas{user-select:none;outline:0}#palette{margin:128px 0 128px 64px}</style><script>p8cols=["#000000","#1D2B53","#7E2553","#008751","#AB5236","#5F574F","#C2C3C7","#FFF1E8","#FF004D","#FFA300","#FFEC27","#00E436","#29ADFF","#83769C","#FF77A8","#FFCCAA"];var flr=Math.floor;class Bitmap{constructor(e,t,r,o=(()=>{})){this.ps=new Uint8Array(t*r),this.canvas=e,this.ctx=e.getContext("2d"),this.width=t,this.height=r,this.s=flr(e.width/t),this.mouseHandler=o,this.callMouseHandler=(e,t,r)=>{var o=flr((e.pageX-this.canvas.offsetLeft)/this.s),a=flr((e.pageY-this.canvas.offsetTop)/this.s);this.mouseHandler(t,o,a,r)},this.callMouseHandlerWithTouch=(e,t)=>{if("e"===t)this.mouseHandler("u",0,0,0);else{var r=flr((e.touches[0].pageX-this.canvas.offsetLeft)/this.s),o=flr((e.touches[0].pageY-this.canvas.offsetTop)/this.s);"s"===t?this.mouseHandler("d",r,o,0):"f"===t&&this.mouseHandler("m",r,o,0)}},e.onmousedown=e=>{this.callMouseHandler(e,"d",e.button)},e.onmouseleave=e=>{this.callMouseHandler(e,"l",e.button)},e.onmouseup=e=>{this.callMouseHandler(e,"u",e.button)},e.onmousemove=e=>{this.callMouseHandler(e,"m",e.button)},e.ontouchstart=e=>{this.callMouseHandlerWithTouch(e,"s")},e.ontouchend=e=>{this.callMouseHandlerWithTouch(e,"e")},e.ontouchmove=e=>{this.callMouseHandlerWithTouch(e,"f")}}cls(e=0){e=flr(e)%16,this.ps.fill(e),this.ctx.fillStyle=p8cols[e],this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}pset(e,t,r){var o=this.s;(e=flr(e))<0||e>=this.width||(t=flr(t))<0||t>=this.height||(r=flr(r)%16,this.ps[t*this.width+e]=r,this.ctx.fillStyle=p8cols[r],this.ctx.fillRect(e*o,t*o,o,o))}line(e,t,r,o,a){var i=Math.abs(r-e),n=Math.abs(o-t),s=e<r?1:-1,l=t<o?1:-1,h=i-n;for(this.pset(e,t,a);e!==r||t!==o;){var c=2*h;c>-n&&(h-=n,e+=s),c<i&&(h+=i,t+=l),this.pset(e,t,a)}}pget(e,t,r){e=flr(e)%32,t=flr(t)%32;return this.ps[t*this.width+e]}}function readSearch(){var e={},t=window.location.search.substr(1).match(/.+=.+?(?=(.=)|$)/g);return t&&t.forEach(t=>{var[r,o]=t.split("=");e[r]=o}),e}function writeSearch(e){var t=Object.entries(e).map(([e,t])=>e+"="+t).join("&");if(history.pushState){var r=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+t;window.history.replaceState({path:r},"",r)}}function hexbyte(e){return("0"+Number(e).toString(16)).slice(-2)}function rle_encode(e){for(var t,r=e.length,o=0,a=e[0],i=a,n=[],s=1;s<=r;s++)a===i&&128!=o||(n.push([o,i]),o=0,i=a),a=e[s],o++;n.push([o,i]),r=n.length,a=n[0];var l=[];for(s=1;s<r;s++)t=n[s],2==a[1].length&&a[0]>1||t[0]>1||128==a[0]?(l.push(a),a=t):1==t[0]&&(a=[a[0]+t[0],a[1]+t[1]]);return l.push(a),l.map(([e,t])=>hexbyte(e-1+(t.length>2?128:0))+t).join("")}function rle_decode(e){e=fromHexString(e);for(var t=new Uint8Array(512),r=0,o=0,a=e.length;r<a;){var i=e[r++],n=1+(127&i);if(i<128)for(var s=e[r++],l=0;l<n;++l)t[o++]=s;else for(l=0;l<n;++l)t[o++]=e[r++]}return t}function hexToBase64(e){return btoa(String.fromCharCode.apply(null,e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))}function base64ToHex(e){for(var t=0,r=atob(e.replace(/[ \r\n]+$/,"")),o=[];t<r.length;++t){var a=r.charCodeAt(t).toString(16);1===a.length&&(a="0"+a),o[o.length]=a}return o.join("")}function webSafe64(e){return e.replace(/\+/g,".").replace(/\//g,"_").replace(/=+$/,"")}function normal64(e){return e.replace(/\./g,"+").replace(/_/g,"/")+"==".substring(0,3*e.length%4)}const fromHexString=e=>new Uint8Array(e.match(/.{1,2}/g).map(e=>parseInt(e,16))),toHexString=e=>e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"");function aToPixlaString(e){var t=e.map(e=>"0123456789abcdef"[e%16]).join("").match(/.{1,2}/g);return rle=rle_encode(t),image_string=webSafe64(hexToBase64(rle)),image_string}function pixlaStringToA(e){return decoded_rle=base64ToHex(normal64(e)),im=rle_decode(decoded_rle),im.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function updateUrl(e){writeSearch({ps:aToPixlaString(Array.from(e.ps))})}function toggleMinimalistic(){var e=document.getElementById("palette");"hidden"==e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden"}function onload(){var e=readSearch(),t=parseInt(e.c)||0,r=!1;handleBodyTouch=e=>{"CANVAS"===e.target.tagName&&e.preventDefault()},["touchstart","touchend","touchmove"].map(e=>document.body.addEventListener("touchmove",handleBodyTouch,{passive:!1}));var o=new Bitmap(document.getElementById("drawing"),32,32,(e,a,i,n)=>{"d"==e?0===n?(r=!0,o.pset(a,i,t),o.old_mouse=[a,i]):2===n&&(t=o.pget(a,i)):"u"==e&&0===n||"l"==e&&r?(r=!1,updateUrl(o)):"m"==e&&r&&(o.line(o.old_mouse[0],o.old_mouse[1],a,i,t),o.old_mouse=[a,i])});if(e.ps){var a=pixlaStringToA(e.ps);for(i=0;i<32;i++)for(n=0;n<32;n++)o.pset(i,n,parseInt(a[n*o.width+i],16))}else{for(i=0;i<32;i++)for(n=0;n<32;n++)o.pset(i,n,15-flr(Math.max(Math.abs(i-15.5),Math.abs(n-15.5)))%16)}var i,n,s=new Bitmap(document.getElementById("palette"),4,4,(e,r,o,a)=>{"d"==e&&(t=4*o+r)});for(i=0;i<4;i++)for(n=0;n<4;n++)s.pset(i,n,4*n+i);key2col="1234qwerasdfzxcv",window.onkeydown=function(e){var r=key2col.indexOf(e.key);"Delete"===e.code?o.cls(t):"KeyM"===e.code?toggleMinimalistic():-1!=r&&(t=r)}}</script><body onload="onload()"><div class="all"><canvas id="drawing"oncontextmenu="event.preventDefault()"width="512"height="512"></canvas><canvas id="palette"oncontextmenu="event.preventDefault()"width="256"height="256"></canvas></div>